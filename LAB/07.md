#include <stdio.h>
#include <string.h>
#include <stdlib.h>

struct studentNode {
    char name[20];
    int age;
    char sex;
    float gpa;
};

struct listNode {
    struct studentNode data;
    struct listNode *next;
};

class LinkedList {
    protected:
        struct listNode *start;
        struct listNode **now;
    public:
        LinkedList();
        ~LinkedList();
        void InsNode(const char n[], int a, char s, float g);
        void DelNode();
        void GoNext();
        virtual void ShowNode();
};

class NewList : public LinkedList {
    public:
        void GoFirst();
        virtual void ShowNode();
};

LinkedList::LinkedList() {
    start = NULL;
    now = &start;
}

LinkedList::~LinkedList() {
    struct listNode *temp = start;
    while (temp != NULL) {
        struct listNode *next = temp->next;
        free(temp);
        temp = next;
    }
    start = NULL;
    now = &start;
}

void LinkedList::InsNode(const char n[], int a, char s, float g) {
    struct listNode *newNode = (struct listNode*)malloc(sizeof(struct listNode));
    strcpy(newNode->data.name, n);
    newNode->data.age = a;
    newNode->data.sex = s;
    newNode->data.gpa = g;
    newNode->next = start;
    start = newNode;

    now = &start;
}

void LinkedList::GoNext() {
    if (*now != NULL) {
        now = &((*now)->next);
    }
}
 
void LinkedList::DelNode() {
    if (*now != NULL && (*now)->next != NULL) {
        struct listNode *temp = (*now)->next;
        (*now)->next = temp->next;
        free(temp);
    }
}

void LinkedList::ShowNode() {
    if (*now != NULL) {
        printf("%s %d %c %.2f\n",
               (*now)->data.name,
               (*now)->data.age,
               (*now)->data.sex,
               (*now)->data.gpa);
    }
}

void NewList::GoFirst() {
    now = &start;
}

void NewList::ShowNode() {
    struct listNode *cur = *now;
    bool first = true;
    while (cur != NULL) {
        if (!first) printf(" ");
        printf("%s", cur->data.name);
        first = false;
        cur = cur->next;
    }
    printf("\n");
}

int main() {
    LinkedList listA;
    NewList listB;
    LinkedList *listC;

    listA.InsNode("one",   1, 'A', 1.1);
    listA.InsNode("two",   2, 'B', 2.2);
    listA.InsNode("three", 3, 'C', 3.3);


    listA.GoNext();     
    listA.ShowNode();   
    listB.InsNode("four", 4, 'D', 4.4);
    listB.InsNode("five", 5, 'E', 5.5);
    listB.InsNode("six",  6, 'F', 6.6);

    listB.GoFirst();   
    listB.DelNode();    
    listB.ShowNode();   

    listC = &listA;     
    listC->GoNext();    
    listC->ShowNode();  

    listC = &listB;     
    listC->ShowNode();  

    return 0;
}
